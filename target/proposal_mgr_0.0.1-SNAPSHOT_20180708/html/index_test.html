<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>欢迎使用</title>

    <!-- Bootstrap core CSS -->
    <!--<link rel="stylesheet" href="../css/bootstrap.min.css">-->

    <!-- Custom styles for this template -->
    <link rel="stylesheet" href="../css/signin.css">

    <!-- js -->
    <!--<script type="text/javascript" src="../js/jquery-1.11.1.min.js"></script>-->
    <!--<script type="text/javascript" src="../js/ui/bootstrap/js/bootstrap.min.js"></script>-->
    <script type="text/javascript" src="../js/common/common.js"></script>

    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.bootcss.com/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script src="http://apps.bdimg.com/libs/angular.js/1.4.6/angular.min.js"></script>
</head>
<body>

<div class="container">


    <nav class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="#">规范文档管理系统</a>
            </div>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="#"> 已登录
                    <span class="glyphicon glyphicon-user"></span> 管理员</a></li>
                <li><a href="#" data-toggle="modal" data-target="#myModal">
                    <span class="glyphicon glyphicon-log-in"></span> 退出</a></li>
            </ul>
        </div>
    </nav>

    <div ng-app="indexApp" ng-controller="indexCtrl">

        <!--<span>规范列表</span>-->

        <!--<ul class="list-group">-->
            <!--<li ng-repeat="info in proposalList" class="list-group-item">-->
                <!--<span style="text-align: left;">{{info.infoName}}</span>-->
                <!--<span class="badge">新</span>-->
                <!--<span style="float: right;">{{info.submitTime}}</span>-->
            <!--</li>-->
        <!--</ul>-->


        <ul id="myTab" class="nav nav-tabs">
            <!--<li class="active">-->
                <!--<a href="#home" data-toggle="tab">菜鸟教程</a>-->
            <!--</li>-->

            <!--<li><a href="#ios" data-toggle="tab">管理</a></li>-->

            <li class="dropdown">
                <a href="#" id="tabDropWriter" class="dropdown-toggle"
                   data-toggle="dropdown">写者 <b class="caret"></b>
                </a>
                <ul class="dropdown-menu" role="menu" aria-labelledby="myTabDrop1">
                    <li><a href="#infoQuery" tabindex="-1" data-toggle="tab">
                        提案查询</a>
                    </li>
                    <li><a href="#infoEdit" tabindex="-1" data-toggle="tab">
                        提案编制</a>
                    </li>
                    <li><a href="#specificationQuery" tabindex="-1" data-toggle="tab">
                        规范查询</a>
                    </li>
                    <li><a href="#specificationEdit" tabindex="-1" data-toggle="tab">
                        规范编制</a>
                    </li>
                    <li><a href="#baseDataMgr" tabindex="-1" data-toggle="tab">
                        信息维护</a>
                    </li>
                </ul>
            </li>

            <li class="dropdown">
                <a href="#" id="tabDropMgr" class="dropdown-toggle"
                   data-toggle="dropdown">管理 <b class="caret"></b>
                </a>
                <ul class="dropdown-menu" role="menu" aria-labelledby="myTabDrop1">
                    <li><a href="#jmeter" tabindex="-1" data-toggle="tab">
                        管理1</a>
                    </li>
                    <li><a href="#ejb" tabindex="-1" data-toggle="tab">
                        管理2</a>
                    </li>
                </ul>
            </li>
        </ul>


        <div id="myTabContent" class="tab-content" >
            <div class="tab-pane fade in active" id="infoQuery">
                <p style="margin-top: 5px;">提案查询</p>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <td>全选<input type="checkbox" style="margin-top: 3px;" id="allSelectIpt"/></td>
                                <td>编号</td>
                                <td>提案名称</td>
                                <td>作者</td>
                                <td>截止日期</td>
                                <td>状态</td>
                                <td>附议数</td>
                                <td>反对数</td>
                            </tr>
                        </thead>

                        <tbody>
                            <tr ng-repeat="info in proposalList">
                                <td>
                                    <input class="listCheckBox" type="checkbox"/>
                                </td>
                                <td>{{info.infoNo}}</td>
                                <td><a href="#" data-toggle="modal" data-target="#infoModal">{{infoName}}</a></td>
                                <td>{{info.writer}}</td>
                                <td>{{info.endTime}}</td>
                                <td>{{info.status}}</td>
                                <td>{{info.numAgree}}</td>
                                <td>{{info.numDisagree}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <a class="btn btn-default">打印</a>
                <a type="button" class="btn btn-primary">撤销</a>
                <a class="btn btn-default">编制</a>
            </div>

            <div class="tab-pane fade" id="infoEdit">
                <p>iOS 是一个由苹果公司开发和发布的手机操作系统。最初是于 2007 年首次发布 iPhone、iPod Touch 和 Apple
                    TV。iOS 派生自 OS X，它们共享 Darwin 基础。OS X 操作系统是用在苹果电脑上，iOS 是苹果的移动版本。</p>
            </div>

            <div class="tab-pane fade" id="specificationQuery">
                <p>jMeter 是一款开源的测试软件。它是 100% 纯 Java 应用程序，用于负载和性能测试。</p>
            </div>

            <div class="tab-pane fade" id="specificationEdit">
                <p>Enterprise Java Beans（EJB）是一个创建高度可扩展性和强大企业级应用程序的开发架构，部署在兼容应用程序服务器（比如 JBOSS、Web Logic 等）的 J2EE 上。
                </p>
            </div>

            <div class="tab-pane fade" id="baseDataMgr">
                <p>Enterprise Java Beans（EJB）是一个创建高度可扩展性和强大企业级应用程序的开发架构，部署在兼容应用程序服务器（比如 JBOSS、Web Logic 等）的 J2EE 上。
                </p>
            </div>
        </div>


    </div>

    <!-- 提案详情模态框（Modal） -->
    <div class="modal fade" id="infoModal" tabindex="-1" role="dialog" aria-labelledby="infoModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title" id="infoModalLabel">
                        提案详情
                    </h4>
                </div>
                <div>
                    <table>
                        <tr>
                            <td><span>提案编号</span><span>{{curInfo.infoNo}}</span></td>
                            <td><span>提案名称</span><span>{{curInfo.infoName}}</span></td>
                        </tr>
                        <tr>
                            <td><span>提案作者</span><span>{{curInfo.writer}}</span></td>
                            <td><span>截止日期</span><span>{{curInfo.endTime}}</span></td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <span>提案内容</span><span>{{curInfo.infoContent}}</span></td>
                        </tr>

                        <tr>
                            <td colspan="2"><span><input></span>
                                <span><input type="radio">附议 <input type="radio">反对 </span>
                                <a>提交</a></td>
                        </tr>
                    </table>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick="submitReg(); return false">提交</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-default" onclick="clearInfo(); return false">清空</button>
                </div>

            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->


    <!-- 提案详情模态框（Modal） -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title" id="myModalLabel">
                        入会申请
                    </h4>
                </div>
                <div>
                    <div class="form-group">
                        <label for="iptRegName" class="col-sm-3 control-label">姓名</label>
                        <div class="col-sm-9">
                            <input id="iptRegName" name="iptRegName" class="form-control" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="iptRegSex" class="col-sm-3 control-label">性别</label>
                        <div class="col-sm-9">
                            <input id="iptRegSex" name="iptRegSex" class="form-control" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="iptRegBirth" class="col-sm-3 control-label">出生年月</label>
                        <div class="col-sm-9">
                            <input id="iptRegBirth" name="iptRegBirth" class="form-control" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="iptRegAdd" class="col-sm-3 control-label">家庭住址</label>
                        <div class="col-sm-9">
                            <input id="iptRegAdd" name="iptRegAdd" class="form-control">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="iptRegPhone" class="col-sm-3 control-label">联系方式</label>
                        <div class="col-sm-9">
                            <input id="iptRegPhone" name="iptRegPhone" class="form-control" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="iptRegRef" class="col-sm-3 control-label">推荐人</label>
                        <div class="col-sm-9">
                            <input id="iptRegRef" name="iptRegRef" class="form-control">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="iptRegHyfh" class="col-sm-3 control-label">行业分会</label>
                        <div class="col-sm-9">
                            <input id="iptRegHyfh" name="iptRegHyfh" class="form-control" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="iptRegZwh" class="col-sm-3 control-label">专委会</label>
                        <div class="col-sm-9">
                            <input id="iptRegZwh" name="iptRegZwh" class="form-control" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="iptRegPsw" class="col-sm-3 control-label">密码</label>
                        <div class="col-sm-9">
                            <input type="password" id="iptRegPsw" name="iptRegPsw" class="form-control" required>
                        </div>
                    </div>

                </div>


                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick="submitReg(); return false">提交</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-default" onclick="clearInfo(); return false">清空</button>
                </div>

                <div>
                    <span>
                        备注：申请内容下啦选择想要申请的行业分会及对应的专委会
                    </span>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
</div>

<script type="text/javascript">
    $(function () {
        $('#myTab li:eq(1) a').tab('show');
    });
</script>

<script type="text/javascript">
    function validateUserInfo() {
        var url = getRootPath() + '/login/signin';

        console.log(url);

        var params = {
            'loginName': $('#inputLoginName').val(),
            'password': $('#inputPassword').val()
        }

        console.log(params);

        var data = $("#login-form").serialize();

//        $.post(url, params, function (data) {
//            alert(data);
//        });

        $.ajax({
            type: "POST",
            url: url,
            async: false,
            data: params,
//            data: data.serialize(),
            dataType: 'json',
            error: function (result) {
                alert(result.resultMesg);
            },
            success: function (result) {
                alert(result.resultMesg);
                if (result.resultCode == 'success') {
                    window.location.href = 'domain/dashboard-1.html';
                }
            }
        });
    }

    function submitReg() {

        var url = getRootPath() + '/login/register';

        var params = {
            'userName': $('#iptRegName').val(),
            'sex': $('#iptRegSex').val(),
            'birth': $('#iptRegBirth').val(),
            'address': $('#iptRegAdd').val(),
            'userPohone': $('#iptRegPhone').val(),
            'refer': $('#iptRegRef').val(),
            'industryBranch': $('#iptRegHyfh').val(),
            'specialCommittee': $('#iptRegZwh').val(),
            'password': $('#iptRegPsw').val()
        }

        $.ajax({
            type: "POST",
            url: url,
            async: false,
            data: params,
            dataType: 'json',
            error: function (result) {
                alert(result.resultMesg);
            },
            success: function (result) {
                alert(result.resultMesg);
                $('#myModal').modal('hide')
            }
        });
    }

    function clearInfo() {
        $('#iptRegName').val('');
        $('#iptRegSex').val('');
        $('#iptRegBirth').val('');
        $('#iptRegAdd').val('');
        $('#iptRegPhone').val('');
        $('#iptRegRef').val('');
        $('#iptRegHyfh').val('');
        $('#iptRegZwh').val('');
    }

    $(function () {
        console.log("加载完成");
    });

</script>

<script type="text/javascript">
    var app = angular.module("indexApp", []);
    app.controller("indexCtrl", function ($scope) {
        $scope.name = "张三";
        $scope.proposalList = {};

        $scope.getProposalList = function () {
            var url = getRequestPath() + '/proposal/listAppProposal';

            console.log(url);

            var params = {
                'loginName': $('#inputLoginName').val(),
                'password': $('#inputPassword').val()
            };

            console.log(params);

            $.ajax({
                type: "POST",
                url: url,
                async: false,
                data: params,
                dataType: 'json',
                error: function (data) {
                    alert(data.resultMesg);
                },
                success: function (data) {
                    if (data.resultCode == 'success') {
                        $scope.proposalList = data.proposalList;
                    }
                }
            });
        };

        $scope.initPage = function () {
            console.log($scope.name);

            $scope.getProposalList();
        };

        $scope.initPage();

    });
</script>

</body>
</html>